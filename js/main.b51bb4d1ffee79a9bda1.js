(()=>{"use strict";function t(r){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(r)}function r(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,e(o.key),o)}}function e(r){var e=function(r,e){if("object"!=t(r)||!r)return r;var n=r[Symbol.toPrimitive];if(void 0!==n){var o=n.call(r,e||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(r)}(r,"string");return"symbol"==t(e)?e:e+""}var n=function(){return t=function t(r){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.length=r,this.hits=0},(e=[{key:"hit",value:function(){this.hits<this.length&&this.hits++}},{key:"isSunk",value:function(){return this.hits===this.length}}])&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;l=!1}else for(;!(l=(n=i.call(e)).done)&&(u.push(n.value),u.length!==r);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(t,r)||function(t,r){if(t){if("string"==typeof t)return a(t,r);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?a(t,r):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function u(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l(n.key),n)}}function l(t){var r=function(t,r){if("object"!=o(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,r||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==o(r)?r:r+""}function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function s(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;l=!1}else for(;!(l=(n=i.call(e)).done)&&(u.push(n.value),u.length!==r);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(t,r)||function(t,r){if(t){if("string"==typeof t)return f(t,r);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?f(t,r):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function d(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y(n.key),n)}}function y(t){var r=function(t,r){if("object"!=c(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,r||"default");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==c(r)?r:r+""}function v(t,r,e){return r=h(r),function(t,r){if(r&&("object"==c(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,p()?Reflect.construct(r,e||[],h(t).constructor):r.apply(t,e))}function p(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(p=function(){return!!t})()}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}function m(t,r){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},m(t,r)}var b=function(t){function r(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r),(t=v(this,r)).isComputer=e,t}return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&m(t,r)}(r,t),e=r,(n=[{key:"attack",value:function(t,r){var e=s(r,2),n=e[0],o=e[1];return t.recieveAttack([n,o])}},{key:"generateRandomCoord",value:function(){return[Math.floor(Math.random()*this.size),Math.floor(Math.random()*this.size)]}}])&&d(e.prototype,n),o&&d(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,o}(function(){return t=function t(){var r=this;!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.size=10,this.board=Array.from({length:this.size},function(){return Array(r.size).fill(null)}),this.ships=0,this.attackedCoord=new Set},r=[{key:"placeShip",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new n(3),r=i(arguments.length>1?arguments[1]:void 0,2),e=r[0],o=r[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.isOutBound([e,o],t.length,a))throw new Error("invalid placement: out of bounds");if(this.isOverlap([e,o],t.length,a))throw new Error("invalid placement: overlap");for(var u=0;u<t.length;u++){var l=a?e:e+u,c=a?o+u:o;this.board[l][c]=t}this.ships++}},{key:"isOutBound",value:function(t,r,e){var n=i(t,2),o=n[0],a=n[1];return!!(e&&a+r>this.size)||!e&&o+r>this.size}},{key:"isOverlap",value:function(t,r,e){for(var n=i(t,2),o=n[0],a=n[1],u=0;u<r;u++){var l=e?o:o+u,c=e?a+u:a;if(null!==this.board[l][c])return!0}return!1}},{key:"recieveAttack",value:function(t){var r=i(t,2),e=r[0],n=r[1],o=[e,n].toString();if(this.attackedCoord.has(o))return null;if(this.attackedCoord.add(o),this.isMiss([e,n]))return"miss";if(this.isHit([e,n])){var a=this.board[e][n];return a.hit(),a.isSunk()&&this.ships--,"hit"}}},{key:"isMiss",value:function(t){var r=i(t,2),e=r[0],n=r[1];return null===this.board[e][n]}},{key:"isHit",value:function(t){var r=i(t,2),e=r[0],n=r[1];return null!==this.board[e][n]}},{key:"allShipSunk",value:function(){return 0===this.ships}}],r&&u(t.prototype,r),e&&u(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,e}());function g(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;l=!1}else for(;!(l=(n=i.call(e)).done)&&(u.push(n.value),u.length!==r);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(t,r)||function(t,r){if(t){if("string"==typeof t)return w(t,r);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?w(t,r):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}var S=document.querySelector(".grid.human-player"),k=document.querySelector(".grid.computer-player"),j=document.getElementById("start-game"),O=document.querySelectorAll("#roster-sidebar li"),E=new b(!1),C=new b(!0),A=null,L=null,P=!0,T=0,I=[];function M(t,r){for(var e=function(e){for(var o=function(o){var i=document.createElement("div");i.classList.add("cell"),i.dataset.row=e,i.dataset.col=o,r?i.addEventListener("click",function(){x&&function(t,r){if(!z)return;var e=C.board[t][r],n=E.attack(C,[t,r]);if(!n)return;var o=document.querySelector('.grid.computer-player .cell[data-row="'.concat(t,'"][data-col="').concat(r,'"]'));o.style.backgroundColor="hit"===n?"red":"white","hit"===n&&e.isSunk()&&H(e,C,"enemy");if(C.allShipSunk())return void B("ðŸŽ‰ You");"miss"===n&&(z=!1,_(),setTimeout(G,500))}(e,o)}):(i.addEventListener("mouseenter",function(){return function(t,r){if(!A)return;q();var e=!0;I=[];for(var n=0;n<A;n++){var o,i=P?t:t+n,a=P?r+n:r,u=S.querySelector('.cell[data-row="'.concat(i,'"][data-col="').concat(a,'"]'));u&&null===(null===(o=E.board[i])||void 0===o?void 0:o[a])||(e=!1),u&&I.push(u)}I.forEach(function(t){t.classList.add(e?"preview-valid":"preview-invalid")})}(e,o)}),i.addEventListener("mouseleave",q),i.addEventListener("click",function(){if(A)try{E.placeShip(new n(A),[e,o],P),function(t,r,e,n){for(var o=g(r,2),i=o[0],a=o[1],u=0;u<e;u++){var l=n?i:i+u,c=n?a+u:a,s=t.querySelector('.cell[data-row="'.concat(l,'"][data-col="').concat(c,'"]'));s&&s.classList.add("grid-ship")}}(S,[e,o],A,P),T++,t=L,(r=document.getElementById(t)).classList.add("placed"),r.style.backgroundColor="gray",A=null,L=null,q(),5===T&&(j.disabled=!1)}catch(t){alert("Invalid placement: "+t.message)}var t,r})),t.appendChild(i)},i=0;i<10;i++)o(i)},o=0;o<10;o++)e(o)}function q(){I.forEach(function(t){t.classList.remove("preview-valid","preview-invalid")}),I=[]}M(S,!1),M(k,!0),O.forEach(function(t){t.addEventListener("click",function(){t.classList.contains("placed")||(L=t.id,A=function(t){switch(t){case"carrier":return 5;case"battleship":return 4;case"destroyer":case"submarine":return 3;case"patrolboat":return 2}}(t.id))})}),document.addEventListener("keydown",function(t){"r"===t.key.toLowerCase()&&(P=!P,q())});var x=!1;j.addEventListener("click",function(){if("Reset Game"===j.textContent)return S.innerHTML="",k.innerHTML="",E.board=Array.from({length:10},function(){return Array(10).fill(null)}),E.ships=0,E.attackedCoord.clear(),C.board=Array.from({length:10},function(){return Array(10).fill(null)}),C.ships=0,C.attackedCoord.clear(),document.querySelectorAll("#roster-sidebar li").forEach(function(t){t.classList.remove("placed"),t.style.backgroundColor=""}),T=0,A=null,L=null,z=!0,x=!1,M(S,!1),M(k,!0),_(),j.textContent="Start Game",void(j.disabled=!0);var t;t=C,[5,4,3,3,2].forEach(function(r){for(var e=!1;!e;){var o=t.generateRandomCoord(),i=Math.random()<.5;try{t.placeShip(new n(r),o,i),e=!0}catch(t){}}}),x=!0,z=!0,_(),j.disabled=!0,alert("Game started! Click on the enemy grid to attack.")});var z=!0,R=document.getElementById("turn-indicator");function _(){z?(R.textContent="Your Turn",R.classList.add("player"),R.classList.remove("computer"),k.classList.remove("locked")):(R.textContent="Computer's Turn",R.classList.add("computer"),R.classList.remove("player"),k.classList.add("locked"))}function B(t){alert(t+" wins!"),x=!1,j.textContent="Reset Game",j.disabled=!1}function G(){var t,r;do{t=C.generateRandomCoord(),r=C.attack(E,t)}while(!r);var e=g(t,2),n=e[0],o=e[1],i=E.board[n][o];document.querySelector('.grid.human-player .cell[data-row="'.concat(n,'"][data-col="').concat(o,'"]')).style.backgroundColor="hit"===r?"red":"white","hit"===r&&i.isSunk()&&H(i,E,"player"),E.allShipSunk()?B("ðŸ’» Computer"):"miss"===r?setTimeout(function(){z=!0,_()},800):setTimeout(G,500)}function H(t,r,e){for(var n=0;n<r.size;n++)for(var o=0;o<r.size;o++)if(r.board[n][o]===t){var i="enemy"===e?'.grid.computer-player .cell[data-row="'.concat(n,'"][data-col="').concat(o,'"]'):'.grid.human-player .cell[data-row="'.concat(n,'"][data-col="').concat(o,'"]'),a=document.querySelector(i);a&&a.classList.add("enemy"===e?"ship-sunk-enemy":"ship-sunk-player")}}})();